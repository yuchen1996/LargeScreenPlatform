<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ sound_map.name }}</title>
    <style>
		body{
			overflow:scroll; overflow:hidden;
		}
		img.bg {
			min-height: 100%; min-width: 1024px; width: 100%; height: auto; position: fixed; top: 0; left: 0;
		}
		@media screen and (max-width: 1024px) {
			img.bg {left: 50%;margin-left: -512px;			}
		}
		a {
			color: #000000
		}
		a:link {
			color: #000000
		} /* 未访问的链接 */
		a:visited {
			color: #000000
		} /* 已访问的链接 */
		a:hover {
			color: #000000
		} /* 鼠标移动到链接上 */
		a:active {
			color: #000000
		} /* 选定的链接 */
	</style>
</head>
<body>
    <img src="{{ MEDIA_URL }}{{ sound_map.background_image }}" class="bg">
	<c:forEach items="${mapMain.mapImageList}" var="addr">
		<c:if test="${addr.isShow=='1'}">
		<div style="position: absolute; left: ${addr.leftState}; top: ${addr.topState};">
			<img src="${fn:replace(addr.imageFile, "|", "" )}" width="${addr.widthLen}" height="${addr.heightLen}" id="img_${addr.id}" border="0">
		</div>
		</c:if>
	</c:forEach>
	<c:forEach items="${mapMain.mapSoundsList}" var="addr">
		<c:if test="${addr.isShow=='1'}">
			<div style="position: absolute; left: ${addr.leftState}; top: ${addr.topState}; color: ${addr.fontColor}; font-size:${addr.fontSize};">
				<audio id="sound_${addr.id}" src="${fn:replace(addr.soundFile, "|", "" )}"  loop="loop"></audio>
				<a id="btn_${addr.id}"><img src="${fn:replace(addr.pauseImageFile, "|", "" )}" width="${addr.widthLen}" height="${addr.heightLen}" id="img_${addr.id}" border="0">${addr.name}</a>
			</div>
			<script>
				$("#btn_${addr.id}").click(function(){
					outplay = "this.currentTime=5";
					var music = document.getElementById("sound_${addr.id}");
					if(music.paused){
						music.load();
						music.play();
						setTimeout(function(){
							music.pause();
							$("#img_${addr.id}").attr("src", "${fn:replace(addr.pauseImageFile, "|", "" )}");
						},7000);
						$("#img_${addr.id}").attr("src", "${fn:replace(addr.playImageFile, "|", "" )}");
					}else{
						music.pause();
						$("#img_${addr.id}").attr("src", "${fn:replace(addr.pauseImageFile, "|", "" )}");

					}
				})
			</script>
		</c:if>
	</c:forEach>
</body>
</html>